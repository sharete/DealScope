<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DealScope | Real-Time Deal Intelligence</title>
    <meta name="description"
        content="DealScope ‚Äî Professional deal monitoring dashboard for Kleinanzeigen. Real-time alerts, price intelligence, and multi-agent search.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Mobile Overlay -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-deal">DEAL</span><span class="logo-scope">SCOPE</span>
            </div>
            <div class="system-status">
                <div class="status-dot"></div>
                <span class="status-text" id="system-status-text">SYSTEM ONLINE</span>
            </div>
        </div>

        <div class="sidebar-content">
            <h2 class="sidebar-section-title">Active Agents</h2>

            <!-- All Agents Filter -->
            <div id="filter-all" class="agent-card agent-card--active" onclick="setFilter(null)">
                <div class="agent-card-info">
                    <span class="agent-card-name">All Agents</span>
                </div>
                <div class="agent-card-badge" id="total-agent-count">0</div>
            </div>

            <div id="agent-list" class="agent-list">
                <!-- Dynamic agents injected here -->
            </div>
        </div>

        <div class="sidebar-footer">
            <button id="add-agent-btn" class="btn btn-primary btn-full">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                New Agent
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="stat-active-agents">0</div>
                <div class="stat-label">Active Agents</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-value" id="stat-today-items">0</div>
                <div class="stat-label">Found Today</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-value" id="stat-total-items">0</div>
                <div class="stat-label">Total Found</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-value" id="stat-uptime">0m</div>
                <div class="stat-label">Uptime</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-value" id="stat-favorites">0</div>
                <div class="stat-label">Favorites</div>
            </div>
        </div>

        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button id="menu-btn" class="btn btn-icon mobile-only" title="Menu">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h2 class="topbar-title">Live Feed</h2>

                <!-- Search -->
                <div class="search-wrapper">
                    <svg class="search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" id="feed-search" class="search-input" placeholder="Search feed...">
                </div>

                <!-- Sort -->
                <div class="sort-wrapper">
                    <svg class="sort-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <path d="M11 5h10M11 9h7M11 13h4M3 17l3 3 3-3M6 18V4"></path>
                    </svg>
                    <select id="feed-sort" class="sort-select">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="price-asc">Price: Low ‚Üí High</option>
                        <option value="price-desc">Price: High ‚Üí Low</option>
                        <option value="alpha">A ‚Üí Z</option>
                    </select>
                </div>
            </div>
            <div class="topbar-right">
                <button id="autoscroll-btn" class="btn btn-tag btn-tag--active" title="Toggle Autoscroll">
                    Autoscroll: ON
                </button>
                <button id="scan-btn" class="btn btn-tag" title="Manual Scan (10s Cooldown)">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        class="scan-icon">
                        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2">
                        </path>
                    </svg>
                    <span>Scan</span>
                </button>
                <button id="favorites-btn" class="btn btn-tag" title="Favorites (F)">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon
                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                        </polygon>
                    </svg>
                    <span id="favorites-count">0</span>
                </button>
                <button id="mute-btn" class="btn btn-tag" title="Toggle Sound (M)">
                    üîá
                </button>
                <button id="shortcuts-btn" class="btn btn-tag" title="Keyboard Shortcuts (?)">
                    ‚å®
                </button>
            </div>
        </header>

        <!-- Feed -->
        <div id="feed-container" class="feed-container">
            <div class="empty-state" id="empty-state">
                <div class="empty-state-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                        opacity="0.3">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
                <h3 class="empty-state-title">Scanning for deals...</h3>
                <p class="empty-state-text">New listings will appear here in real-time.<br>Create an agent to start
                    monitoring.</p>
            </div>
        </div>
    </main>

    <!-- Favorites Panel -->
    <div id="favorites-panel" class="favorites-panel">
        <div class="favorites-header">
            <h3>Favorites</h3>
            <button id="close-favorites" class="btn btn-icon">‚úï</button>
        </div>
        <div id="favorites-list" class="favorites-list">
            <div class="empty-state" style="padding: 2rem;">
                <p class="empty-state-text">No favorites yet.<br>Click ‚≠ê on a listing to save it.</p>
            </div>
        </div>
    </div>

    <!-- Add/Edit Agent Modal -->
    <div id="agent-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2 class="modal-title" id="modal-title">Add New Agent</h2>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Agent Name</label>
                    <input type="text" id="agent-name" class="form-input" placeholder="e.g. MacBook Air">
                </div>
                <div class="form-group">
                    <label class="form-label">Search Query</label>
                    <input type="text" id="agent-query" class="form-input" placeholder="e.g. macbook air m1">
                    <p class="form-hint">What you'd type in the search bar of the selected marketplace.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Marketplace</label>
                    <div class="marketplace-selector">
                        <label class="marketplace-option">
                            <input type="radio" name="agent-marketplace" value="kleinanzeigen" checked>
                            <span class="marketplace-card">
                                <span class="marketplace-icon">üè∑Ô∏è</span>
                                <span class="marketplace-name">Kleinanzeigen</span>
                            </span>
                        </label>
                        <label class="marketplace-option">
                            <input type="radio" name="agent-marketplace" value="vinted">
                            <span class="marketplace-card">
                                <span class="marketplace-icon">üëó</span>
                                <span class="marketplace-name">Vinted</span>
                            </span>
                        </label>
                        <label class="marketplace-option">
                            <input type="radio" name="agent-marketplace" value="both">
                            <span class="marketplace-card">
                                <span class="marketplace-icon">üîÑ</span>
                                <span class="marketplace-name">Both</span>
                            </span>
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Min Price (‚Ç¨)</label>
                        <input type="number" id="agent-min-price" class="form-input" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Max Price (‚Ç¨)</label>
                        <input type="number" id="agent-max-price" class="form-input" placeholder="No limit">
                    </div>
                </div>
                <p class="form-hint" style="margin-top: -0.5rem;">Items under max price will be flagged as <span
                        class="deal-badge-inline">DEAL</span></p>
            </div>
            <div class="modal-actions">
                <button id="cancel-agent-btn" class="btn btn-ghost">Cancel</button>
                <button id="save-agent-btn" class="btn btn-primary">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Save Agent
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-content--sm">
            <div class="modal-icon modal-icon--danger">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </div>
            <h2 class="modal-title">Delete Agent?</h2>
            <p class="modal-text">This agent and its configuration will be permanently removed. This cannot be undone.
            </p>
            <div class="modal-actions">
                <button id="confirm-cancel-btn" class="btn btn-ghost">Cancel</button>
                <button id="confirm-delete-btn" class="btn btn-danger">Delete Agent</button>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="shortcuts-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2 class="modal-title">Keyboard Shortcuts</h2>
            <div class="shortcuts-grid">
                <div class="shortcut-item"><kbd>N</kbd><span>New Agent</span></div>
                <div class="shortcut-item"><kbd>S</kbd><span>Manual Scan</span></div>
                <div class="shortcut-item"><kbd>F</kbd><span>Toggle Favorites</span></div>
                <div class="shortcut-item"><kbd>M</kbd><span>Toggle Sound</span></div>
                <div class="shortcut-item"><kbd>/</kbd><span>Focus Search</span></div>
                <div class="shortcut-item"><kbd>Esc</kbd><span>Close Modal/Panel</span></div>
                <div class="shortcut-item"><kbd>?</kbd><span>Show Shortcuts</span></div>
            </div>
            <div class="modal-actions">
                <button id="close-shortcuts-btn" class="btn btn-primary">Got it</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="app.js?v=10"></script>
</body>

</html>